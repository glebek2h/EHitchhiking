<div class="modal-wrapper trips-modal-container">
  <app-pre-loading [isLoading]="loading" [size]="loaderSize"></app-pre-loading>
  <header class="modal-header form-row">
    <span mat-dialog-title class="trips-title">History</span>
    <i class="material-icons icon-size">
      history
    </i>
  </header>
  <!--  -->
  <!--  <mat-expansion-panel-header>-->
  <mat-expansion-panel>
    <mat-expansion-panel-header>Filter</mat-expansion-panel-header>
    <div class="form-row ">
      <mat-form-field>
        <mat-label>Role</mat-label>
        <mat-select [(ngModel)]="selectedRole" name="selected">
          <mat-option (click)='filterByRole()' *ngFor="let role of roles" [value]="role.value">
            {{role.viewValue}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-slide-toggle [(ngModel)]="selectedFavorite" (change)="changedFavorite()">Favorite trips</mat-slide-toggle>
      <button [ngSwitch]="selectedBySort" (click)="ChangeSort()" class="modal-close-control-btn" mat-icon-button>
        <mat-icon *ngSwitchCase="0" title="not sort">
          call_split
        </mat-icon>
        <mat-icon *ngSwitchCase="1" title="ASC"> call_made</mat-icon>
        <mat-icon *ngSwitchCase="2" title="DESC">
          call_received
        </mat-icon>
      </button>
    </div>
  </mat-expansion-panel>

  <div mat-dialog-content class="trips">

    <div class="trips-container" *ngFor="let trip of tripsArray|
    filterByRole:role.roleField:selectedRole:role.isEnable|
     filterByFavorite:'isFavorite':selectedFavorite|
     sortTrips:'rating':order|
     slice: 0:limit; trackBy: trackById">
      <app-trip class="trip" [trip]="trip"></app-trip>
    </div>
    <div class="scroll-marker" #sMarker></div>

    <app-no-data *ngIf="!tripsArray.length" isEmpty="true"></app-no-data>
  </div>
  <footer>
    <div mat-dialog-actions class="trips-btn">
      <button mat-button (click)="replaceAll()" *ngIf="tripsArray.length">Replase all</button>
    </div>
  </footer>
  <div class="modal-close-control">
    <button class="modal-close-control-btn" mat-icon-button (click)="exit()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

</div>

